name: init-setup
runs:
  using: composite
  steps:
  - uses: actions/checkout@v2
  - run: yarn --version
    shell: bash
  - run: node --version
    shell: bash
  - id: yarn-cache-dir-path
    run: echo "::set-output name=dir::$(yarn config get cacheFolder)"
    shell: bash
  - uses: actions/cache@v2
    with:
      path: "${{ steps.yarn-cache-dir-path.outputs.dir }}"
      key: "${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}"
      restore-keys: "${{ runner.os }}-yarn-"
  - run: yarn install --frozen-lockfile
    shell: bash
  - run: yarn build
    shell: bash